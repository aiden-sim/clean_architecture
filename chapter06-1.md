# 30장 데이터베이스는 세부사항이다.
### 서론
- 아키텍처 관점에서 데이터베이스는 엔티티가 아니다.
- 데이터베이스는 일개 소프트웨어일 뿐이다.

### 관계형 데이터베이스
- 관계형 데이터베이스는 데이터를 저장하고 접근하는데 탁월한 기술이었다.
  - 하지만 이 기술이 얼마나 뛰어나든, 유용하든, 아니면 수학적으로 견고하든, 결국은 그저 기술일 뿐이고 이는 세부사항임을 뜻한다.
- 데이터를 테이블에 행 단위로 배치한다는 자체는 아키텍처적으로 볼 때 전혀 중요하지 않다.
  - 애플리케이션의 유스케이스는 이러한 방식을 알아서는 안 되며 관여해서도 안된다.
  - 데이터가 테이블 구조를 가진다는 사실은 외부 원에 위치한 최하위 수준의 유틸리티 함수만 알아야 한다.
- 많은 데이터 접근 프레임워크가 테이블과 행이 객체 형태로 시스템에 돌아다니게 허용하는데 아키텍처적으로 잘못된 설계다
  - 이러면 유스케이스, 업무 규칙, 심지어는 UI조차도 관계형 데이터 구조에 결합되어 버린다.
  
### 데이터베이스 시스템은 왜 이렇게 널리 사용되는가?
- 데이터베이스가 소프트웨어 시스템과 소프트웨어 기업을 장악할 수 있었던 이유는 바로 **디스크** 때문이었다.
- 반 세기 동안 회전식 자기 디스크는 데이터 저장소의 중심에 있었다.
  - 디스크 기술은 계속 발전해 왔지만 치명적인 한가지 특성 (바로 느리다) 때문에 프로그래머를 괴롭혔다.
- 디스크 때문에 피해갈 수 없는 시간 지연을 완화하기 위해 색인, 캐시, 쿼리 계획 최적화가 필요해졌다.
  - 데이터 접근 및 관리 시스템이 필요했고, 두 가지 유형으로 분리되었다.
    - 파일 시스템
    - 관계형 데이터베이스 관리 시스템 (RDBMS)
- 파일 시스템
  - 파일 시스템은 문서(document) 기반이다.
  - 문서를 이름을 기준으로 저장하거나 조회할 때는 잘 동작하지만, 내용을 기준으로 검색할 때는 그리 크게 도움되지 않는다.
- 데이터베이스 시스템
  - 내용 기반이다.
  - 레코드가 서로 공유하는 일부 내용에 기반해서 다수의 레코드를 연관 짓는데 매우 탁월하나, 정형화되지 않은ㅇ 문서를 저장하고 검색하는 데는 대체로 부적합하다.
  
- 이들 두 시스템은 데이터를 **디스크**에 체계화해서, 각 시스템에 특화된 방식으로 접근해야 할 때 가능한 한 효율적으로 데이터를 저장하고 검색할 수 있도록 한다.

### 디스크가 없다면 어떻게 될까?
- 디스크는 RAM으로 대체되고 있다. (테이프 드라입, 플로피 드라입, CD등 처럼 소멸중)
- 데이터가 RAM에 저장된다면 데이터를 어떻게 체계화할 것인가?
  - 이 데이터들은 리스트, 트리, 해시 테이블, 스택, 큐 혹은 무수히 많은 데이터 구조로 체계화할 것이며, 데이터에 접근할 때는 포인터나 참조를 사용할 것이다.
- 현재도 데이터를 RAM으로 읽은 후에 다루기 편리한 형태로 구조를 변경하고 있다.

### 세부사항
- 데이터베이스는 그저 메커니즘에 불과하며, 디스크 표면과 RAM 사이에서 데이터를 옮길 때 사용할 뿐이다.
- 아키텍처 관점에서 회전식 자기 디스크에 데이터가 있기만 한다면, 데이터가 어떤 형태인지 절대 신경 써서는 안 된다.

### 하지만 성능은?
- 성능은 아키텍처와 괸련된 관심사지만 데이터 저장소의 측면에서 성능은 완전히 캡슐화하여 업무 규칙과는 분리할 수 있는 관심사다.
- 데이터 저장소에서 데이터를 빠르게 넣고 뺄 수 있어야 하는 것은 맞지만, 이는 저수준의 관심사다.
- 성능은 시스템의 전반적인 아키텍처와는 아무런 관련이 없다.

### 개인적인 일화
- RAM vs RDBMS
  - 결국 고객의 요구사항으로 RDBMS를 도입했다. (마케팅의 승리)
- 그 시절로 다시 돌아간다면 한쪽에는 RDBMS를 붙이고, RDBMS에 대한 제한적이며 안정적인 몇 가지 데이터 접근 채널을 제공하는 동시에 시스템의 중심부에는 랜덤 액세스 파일을 유지

### 결론
- 데이터는 중요하지만, 데이터베이스는 세부사항이다.

# 31장 웹은 세부사항이다.


# 32장 프레임워크는 세부사항이다.


